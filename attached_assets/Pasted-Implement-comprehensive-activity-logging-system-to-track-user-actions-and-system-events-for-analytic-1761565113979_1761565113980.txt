Implement comprehensive activity logging system to track user actions
and system events for analytics and debugging.

DATABASE SCHEMA:
1. Create new table in shared/schema.ts: activityLogs
- id: varchar (UUID)
- userId: varchar (foreign key to users) - nullable for system events
- action: varchar - type of action (e.g., "food_added", "recipe_generated")
- entity: varchar - what was affected (e.g., "food_item", "recipe")
- entityId: varchar - ID of the affected entity (nullable)
- metadata: jsonb - additional context data
- ipAddress: varchar - user IP (nullable)
- userAgent: varchar - browser/device info (nullable)
- timestamp: timestamp - when action occurred
- sessionId: varchar - session identifier (nullable)

2. Add indexes for performance:
- Index on userId for user-specific queries
- Index on action for filtering by action type
- Index on timestamp for time-based queries
- Composite index on (userId, timestamp) for user timelines

BACKEND IMPLEMENTATION:
1. Create ActivityLogger service (server/services/activity-logger.service.ts):
- logActivity(params: ActivityLogParams): Promise<void>
- getActivityLogs(userId?: string, filters?: ActivityFilters): Promise<ActivityLog[]>
- getUserTimeline(userId: string, limit: number): Promise<ActivityLog[]>
- getSystemEvents(filters?: ActivityFilters): Promise<ActivityLog[]>

2. Define tracked actions:
- User actions: login, logout, signup, settings_changed
- Food inventory: food_added, food_updated, food_deleted, food_consumed
- Recipes: recipe_generated, recipe_saved, recipe_deleted, recipe_rated
- AI chat: message_sent, ai_response_received
- Notifications: notification_sent, notification_dismissed
- Shopping: shopping_list_created, item_checked_off
- Meal planning: meal_planned, meal_completed

3. Create middleware to auto-log API requests:
- Intercept requests in Express middleware
- Extract user, action, and metadata
- Log to database asynchronously (don't block requests)
- Handle errors gracefully

4. Add API endpoints:
- GET /api/activity-logs - get user's activity (paginated)
- GET /api/activity-logs/timeline - user's timeline view
- GET /api/admin/activity-logs - admin view of all activity
- GET /api/admin/activity-stats - aggregated statistics

INTEGRATION POINTS:
1. Update existing routes to log activities:
- Food CRUD operations
- Recipe generation and management
- Chat message handling
- Authentication events
- Notification events

2. Add logging calls in appropriate places:
await activityLogger.logActivity({
userId: req.user?.id,
action: 'food_added',
entity: 'food_item',
entityId: newFood.id,
metadata: { name: newFood.name, location: newFood.storageLocationId },
ipAddress: req.ip,
userAgent: req.headers['user-agent']
});

FRONTEND COMPONENTS:
1. Create Activity Timeline component:
- Show chronological list of user actions
- Filter by action type
- Search by entity name
- Date range selector
- Infinite scroll/pagination

2. Add to Settings page:
- "Activity History" section
- Display recent activity
- Link to full timeline

3. Admin dashboard enhancements:
- System-wide activity feed
- User activity lookup
- Activity statistics charts
- Real-time activity monitoring (optional)

PRIVACY & PERFORMANCE:
1. Add retention policy:
- Auto-delete logs older than 90 days (configurable)
- Archive important events before deletion
- GDPR compliance - delete user logs on account deletion

2. Performance optimizations:
- Use background job queue for logging (don't block requests)
- Batch insert logs if high volume
- Implement log rotation/archival
- Cache recent activity for fast retrieval

3. User privacy settings:
- Allow users to opt-out of detailed logging
- Anonymize sensitive data in logs
- Provide data export functionality

TESTING:
- Verify all critical actions are logged
- Test log retrieval performance with large datasets
- Validate privacy controls work correctly
- Check retention policy executes properly
- Test admin views have correct permissions
